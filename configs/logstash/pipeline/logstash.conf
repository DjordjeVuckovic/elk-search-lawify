input {
  http {
    port => 5044
    codec => json
  }
}

filter {
  if ![Properties][serviceName] {
      mutate {
        add_field => { "[Properties][serviceName]" => "unknown_service" }
      }
   }
  mutate {
    lowercase => ["[Properties][serviceName]"]
  }
}

output {
  elasticsearch {
    hosts => ["elk-elasticsearch:9200"]
    index => "%{[Properties][environment]}-logs-%{+YYYY.MM.dd}"
  }
  # For debugging: Output to console
  stdout { codec => rubydebug }
}
